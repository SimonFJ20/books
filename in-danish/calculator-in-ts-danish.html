<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Lommeregner i Typescript - Books</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../calculator-in-ts.html"><strong aria-hidden="true">1.</strong> Calculator in Typescript</a></li><li class="chapter-item expanded "><a href="../in-danish/in-danish.html"><strong aria-hidden="true">2.</strong> In Danish</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../in-danish/calculator-in-ts-danish.html" class="active"><strong aria-hidden="true">2.1.</strong> Lommeregner i Typescript</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Books</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="hvordan-man-laver-en-lommeregner-i-typescript"><a class="header" href="#hvordan-man-laver-en-lommeregner-i-typescript">Hvordan man laver en Lommeregner i Typescript</a></h1>
<p><a href="../calculator-in-ts.html"><strong>Også på engelsk</strong></a></p>
<h2 id="intro"><a class="header" href="#intro">Intro</a></h2>
<p>Denne guide er lavet, som en kort guide til at lave en lommeregner.</p>
<h2 id="opsætning"><a class="header" href="#opsætning">Opsætning</a></h2>
<h3 id="installer-deno"><a class="header" href="#installer-deno">Installer Deno</a></h3>
<p>For at køre din kode skal du bruge en 'runner'.
Denne guide vil bruge Deno, som du kan downloade <a href="https://deno.land/#installation">her</a>.</p>
<p>Du kan teste om Deno virker ved at skrive <code>deno -V</code> eller <code>deno --version</code> i en terminal/kommandoprompt,
og den så noget i retningen af: </p>
<pre><code>$ deno -V
deno 1.20.1
</code></pre>
<h3 id="hav-et-tekst-redigerings-værktøj"><a class="header" href="#hav-et-tekst-redigerings-værktøj">Hav et tekst-redigerings-værktøj</a></h3>
<p>Jeg bruger normalt VS Code til Typescript,
men du kan bruge hvad end du har lyst til.</p>
<p>Hvis du bruger VS Code, så installer
<a href="https://marketplace.visualstudio.com/items?itemName=denoland.vscode-deno">Deno extension'et</a>, i 'extensions'-menuen.</p>
<h2 id="print-hello-world"><a class="header" href="#print-hello-world">Print hello world</a></h2>
<p>For at teste om alting virker,
skriv:</p>
<pre><code class="language-ts">console.log(&quot;hello world&quot;);
</code></pre>
<p>i en fil, og gem den som <code>main.ts</code>.</p>
<p>Kør derefter filen fra en terminal med kommandoen <code>deno run main.ts</code>.</p>
<h3 id="hvordan-man-gør-det-i-vs-code"><a class="header" href="#hvordan-man-gør-det-i-vs-code">Hvordan man gør det i VS Code</a></h3>
<ol>
<li>Lav en mappe, fx <code>my-typescript-project</code> på skrivebordet.</li>
<li>Åben VS Code</li>
<li>Klik <code>File</code> i venstre hjørne -&gt; Klik <code>Open Folder</code> -&gt; Find og marker mappen du lavede -&gt; Klik <code>Open</code>.</li>
<li>Åben 'command pallet' ved at trykke <code>ctrl + shift + p</code> -&gt; søg på <code>deno init</code>, tryk <code>enter</code> på <code>Deno: Initialize Workspace Configuration</code> og tryk <code>enter</code> til de 2 spørgsmål.</li>
<li>Klik <code>New File</code> i 'explorer'-fanen, og giv filen navnet <code>main.ts</code></li>
<li>Åben filen ved at dobbeltklikke på den.</li>
<li>Skrive koden fra før i filen.</li>
<li>Gem filen ved at trykke <code>ctrl + s</code> på dit tastatur.</li>
<li>Åben en terminal (hvis ikke den er åben allerede) ved at trykke <code>ctrl + j</code> eller ved at klikke og trække op fra overkanten af bundlinjen i VS Code.</li>
<li>Skriv <code>deno run main.ts</code> og tryk <code>enter</code>.</li>
</ol>
<h3 id="forklaring-af-koden"><a class="header" href="#forklaring-af-koden">Forklaring af koden</a></h3>
<p><code>console.log(...args)</code> er det samme som <code>print(...args)</code> funktionen i Python. Den output'er hvad enten man giver den som argumenter til brugeren i terminal.</p>
<h2 id="læg-2-tal-sammen"><a class="header" href="#læg-2-tal-sammen">Læg 2 tal sammen</a></h2>
<p>Som det første, vil vi have et simpelt program som tager 2 tal, og lægger dem sammen.</p>
<pre><code class="language-ts">function addToNumbers(a: number, b: number): number {
    let result = a + b;
    return result;
}

const inputA = prompt(&quot;a? &quot;)!;
const inputB = parseInt(prompt(&quot;b? &quot;)!);
const output = addToNumbers(parseInt(inputA), inputB);
console.log(output);
</code></pre>
<h3 id="hvordan-man-gør-det-i-vs-code-1"><a class="header" href="#hvordan-man-gør-det-i-vs-code-1">Hvordan man gør det i VS Code</a></h3>
<ol>
<li>Slet (eller kommenter ud) alt det gamle kode og skriv koden ovenover.</li>
<li>Gem filen ved at trykke <code>ctrl + s</code> på dit tastatur.</li>
<li>Åben en terminal (hvis ikke den er åben allerede) ved at trykke <code>ctrl + j</code> eller ved at klikke og trække op fra overkanten af bundlinjen i VS Code.</li>
<li>Skriv <code>deno run main.ts</code> og tryk <code>enter</code>.</li>
</ol>
<h3 id="forklaring-af-koden-1"><a class="header" href="#forklaring-af-koden-1">Forklaring af koden</a></h3>
<p><code>addToNumbers</code> er en 'funktion', som tager 2 tal, lægger dem sammen og retunere resultatet. <code>(a: number, b: number)</code>,
betyder at når vi kalder funktionen, giver vi den 2 tal, fx  <code>(23, variableContainingNumber)</code>. <code>): number</code>,
betyder at funktionen vil retunere et tal.</p>
<p><code>prompt</code> er en funktion, som får input fra brugeren, eksempel:</p>
<pre><code class="language-ts">let usersBirthday = prompt(&quot;what is your birthday? &quot;)!;
console.log(`Your birthday is on ${usersBirthday}!`);
</code></pre>
<p>would run like:</p>
<pre><code>$ deno run main.ts
what is your birthday? well, you see, my birthday is acually on the fourth of July
well, you see, my birthday is acually on the fourth of July
Your birthday is on well, you see, my birthday is acually on the fourth of July!
</code></pre>
<p><code>parseInt</code> er en funktion, som får en string tekst og konvertere det til et tal. Example:</p>
<pre><code class="language-ts">const stringA: string = &quot;8&quot;;
const stringB = &quot;4&quot;;
const addedStrings = stringA + stringB;
console.log(addedStrings); // will print '84'

const numberA: string = parseInt(stringA);
const numberB = parseInt(stringB);
const addedNumbers = numberA + numberB;
console.log(addedNumbers); // will print '12'
</code></pre>
<p>Hvis du vil bruge decimaltal (kaldet floating point numbers, or 'float(s)') fx <code>3.14</code> og <code>0.23</code>, brug <code>parseFloat</code>.</p>
<p>Udråbstegnet <code>!</code> bag ved <code>prompt(_)</code> er fordi <code>prompt</code> returnerer <code>string | undefined</code>.
'Pipe'-symbolet <code>|</code> betyder 'eller', så <code>prompt</code> funktionen vil enten returnere en <code>string</code>-værdi eller en <code>undefined</code>-værdi.
For at skrive et <code>|</code>, tryk <code>AltGr</code> (tasten ved siden af mellemrumstasten) + tasten ved siden af tilbagetasten.
I &quot;rigtig&quot; kode ville tjekke <code>undefined</code>-værdier sådan:</p>
<pre><code class="language-ts">const maybeUsername = prompt(&quot;what is your username? &quot;);
if (maybeUsername) { // (maybeUsername) and (maybeUsername !== undefined) is the same, because (undefined === false)
    let username: string = maybeUsername;
    loginWithUsername(maybeUsername);
} else {
    console.log('nice one, you just fucked it up.');
    throw new Error('fucked');
}
</code></pre>
<p>Men fordi error-håndtering ikke er en prioritet lige nu,
vil vi bare bruge udråbstegnet <code>!</code>,
som også hedder 'Non-null assertion operator',
altså ikke-nul forsikringsoperator. Eksempel:</p>
<pre><code class="language-ts">let maybeValue: number | undefined = maybeGetValueFromSomewhere();
functionThatHasToGetAValue(maybeValue); // Argument of type 'undefined' is not assignable to parameter of type 'number'.(2345)
functionThatHasToGetAValue(maybeValue!); // Ok
</code></pre>
<h2 id="multi-funktion-lommeregner"><a class="header" href="#multi-funktion-lommeregner">Multi-funktion lommeregner</a></h2>
<p>Lad os udvide vores lommeregner til at kunne lave forskellige operationer.</p>
<pre><code class="language-ts">function doOperation(a: number, b: number, operation: string): number {
    if (operation === '+') {
        return a + b;
    } else if (operation === '-') {
        return a - b;
    } else if (operation === '*') {
        return a * b;
    } else {
        throw new Error('unknown operation');
    }
}

const a = parseInt(prompt(&quot;a = &quot;)!);
const b = parseInt(prompt(&quot;b = &quot;)!);
const op = prompt(&quot;operation? &quot;)!;
const result = doOperation(a, b, op);
console.log(`${a} ${op} ${b} = ${result}`);
</code></pre>
<p>Prøv selv at tilføje division <code>/</code>.</p>
<h3 id="test"><a class="header" href="#test">Test</a></h3>
<pre><code>$ deno run main.ts
a = 4
a = 6
operation? -
4 - 6 = -2
</code></pre>
<h3 id="forklaring-af-koden-2"><a class="header" href="#forklaring-af-koden-2">Forklaring af koden</a></h3>
<p>Backticks'ne <code>` `</code> laver en 'template string',
ligesom en normalt tekst string med double quotes <code>&quot; &quot;</code> eller single quotes <code>' '</code>,
men du kan nu bruge dollarsign curlybrace syntaksen <code>${...}</code> for at indsætte værdier.
For at skrive <code>` `</code> tryk <code>Shift</code> + tasten ved siden af tilbagetasten.
Example:</p>
<pre><code class="language-ts">let a = 5;
let myString = `word ${a} word word ${3 + 5 * a} word word`;
</code></pre>
<p><code>throw new Error(&quot;error message&quot;)</code> består af <code>throw</code> keyword'et/operatoren of en 'thrown' værdi,
lige her er det et nyt object af <code>Error</code>-klassen, som er brugt til dette formål.
'Throwing' af en værdi (of henvists til, som 'throwing an exception/error', eller bare 'throwing'),
betyder at vi stopper det programmet lavet lige nu, og sætter det til en slags 'exception-mode'.
Dette concept hedder 'exceptions'.</p>
<p>Instead of the program crashing,
when we throw an exception, we can also <code>try</code> and <code>catch</code> the exception,
which is something you can read <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/try...catch">here</a>.</p>
<p>In Javascript and Typescript we use single equals <code>=</code> for assignment, eg: <code>let a = 5;</code>,
and we use triple equals 'strict equality operator' <code>===</code> for testing whether 2 values are the same.
The 'strict in-equality operator' <code>!==</code> tests whether 2 values are not the same.
In Typescript we use <code>===</code> instead of <code>==</code>, because of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Strict_equality">annoying history you can read here</a>.</p>
<h2 id="smartere-input"><a class="header" href="#smartere-input">Smartere input</a></h2>
<p>Vi gidder ikke at skrive det første, andet og derefter det tredje input, fx (<code>5</code> -&gt; <code>4</code> -&gt; <code>-</code> =&gt; <code>5 - 4 = 1</code>),
vi vil hellere bare skrive, fx <code>5-4</code> -&gt; <code>1</code>.</p>
<pre><code class="language-ts">type Equation = {
    a: number,
    b: number,
    operation: string
};

function doOperation(equation: Equation): number {
    const {a, b, operation} = equation;
    if (operation === '+') {
        return a + b;
    } else if (operation === '-') {
        return a - b;
    } else if (operation === '*') {
        return a * b;
    } else {
        throw new Error('unknown operation');
    }
}

function parseEquation(text: string): Equation {
    const a = parseInt(text[0]);
    const op = text[1];
    const b = parseInt(text[2]);
    const equation: Equation = {
        a,
        b, 
        operation: op,
    };
    return equation;
}

const input = prompt(&quot;&gt; &quot;)!;
const equation = parseEquation(input);
const result = doOperation(equation);
console.log(result);
</code></pre>
<h3 id="explaning-the-code"><a class="header" href="#explaning-the-code">Explaning the code</a></h3>
<p><code>const {a, b, operator} = equation;</code> is called 'destructuring assignment',
which you can read more of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">here</a>.</p>
<p><code>test[2]</code> is the value at 2's place in the string, counting starting from zero. Example:</p>
<pre><code class="language-ts">const s = &quot;hello world&quot;;
const a = s[0];
console.log(a); // prints &quot;h&quot;
const b = s[2]; 
const c = s[5];
const d = s[9];
console.log(a + b + c); // prints 'lol' 
</code></pre>
<h2 id="more-flexible-parser"><a class="header" href="#more-flexible-parser">More flexible parser</a></h2>
<p>The 'parser' is a bit stupid right now, as it only knows how to parse a very specific 'grammar',
eg: <code>3+2</code> and <code>8-9</code>, but now <code>23-2</code> or <code>2 + 4</code>, lets fix that.</p>
<pre><code class="language-ts">type Equation = /* from before */;
function doOperation(equation: Equation): number { /* from before */}

type Parser = {
    text: string,
    index: number,
};

function parseEquation(text: string): Equation {
    let parser: Parser = {
        text,
        index: 0,
    };
    const a = parseNumber(parser);

    skipWhiteSpace(parser);

    const operator = parser.text[parser.index];
    parser.index++; // same as `index += 1`, same as `index = index + 1`

    skipWhiteSpace(parser);

    const b = parseNumber(parser);
    return {a, b, operator};
}

function skipWhiteSpace(parser: Parser) {
    while (isInputRemaning(parser) &amp;&amp; parser.text[parser.index] === ' ') {
        parser.index++;
    }
}

function parseNumber(p: Parser): number {
    let value = &quot;&quot;;
    value += p.text[p.index];
    p.index++;
    while (isInputRemaning(p) &amp;&amp; isCharANumber(p.text[p.index])) {
        value += p.text[p.index];
        p.index++;
    }
    return parseInt(value);
}

function isCharANumber(char: string): boolean {
    if (&quot;1234567890&quot;.includes(char))
        return true;
    else
        return false;
}

function isInputRemaning(p: Parser): boolean {
    return p.index &lt; p.text.length;
}

const input = prompt(&quot;&gt; &quot;)!;
const equation = parseEquation(input);
const result = doOperation(equation);
console.log(result);
</code></pre>
<h2 id="vil-du-have-mere"><a class="header" href="#vil-du-have-mere">Vil du have mere</a></h2>
<p>Spørg Simon</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../in-danish/in-danish.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../in-danish/in-danish.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
