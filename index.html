<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Calculator in Typescript - Books</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="calculator-in-ts.html"><strong aria-hidden="true">1.</strong> Calculator in Typescript</a></li><li class="chapter-item expanded "><a href="in-danish/in-danish.html"><strong aria-hidden="true">2.</strong> In Danish</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="in-danish/calculator-in-ts-danish.html"><strong aria-hidden="true">2.1.</strong> Lommeregner i Typescript</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Books</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="how-to-make-a-calculator-in-typescript"><a class="header" href="#how-to-make-a-calculator-in-typescript">How to make a Calculator in Typescript</a></h1>
<p><a href="in-danish/calculator-in-ts-danish.html"><strong>Also available in danish</strong></a></p>
<h2 id="intro"><a class="header" href="#intro">Intro</a></h2>
<p>This is meant to be as short as possible, hence 'Intro' instead of 'Introduction'.</p>
<p>By the end of this small guide, you will have a working calculator.</p>
<h2 id="prep"><a class="header" href="#prep">Prep</a></h2>
<h3 id="install-deno"><a class="header" href="#install-deno">Install Deno</a></h3>
<p>To run your code, you need a 'runner'. Download <a href="https://deno.land/#installation">Deno from here</a>.</p>
<p>Test by running <code>deno -V</code> or <code>deno --version</code>, which should print something like:</p>
<pre><code>$ deno -V
deno 1.20.1
</code></pre>
<h3 id="also-have-a-text-editor"><a class="header" href="#also-have-a-text-editor">Also have a text editor</a></h3>
<p>I use VS Code for Typescript, you can use whatever, I don't care.</p>
<p>If using VS Code,
install the <a href="https://marketplace.visualstudio.com/items?itemName=denoland.vscode-deno">Deno</a> extension,
from the extensions menu.</p>
<h2 id="print-hello-world"><a class="header" href="#print-hello-world">Print hello world</a></h2>
<p>To test that everything works, write </p>
<pre><code class="language-ts">console.log(&quot;hello world&quot;);
</code></pre>
<p>in a file, and save it as <code>main.ts</code>.</p>
<p>Now run the file by typing <code>deno run main.ts</code> in a terminal/command line.</p>
<h3 id="doing-it-in-vs-code"><a class="header" href="#doing-it-in-vs-code">Doing it in VS Code</a></h3>
<ol>
<li>Create a folder, eg. <code>my-typescript-project</code> on the desktop.</li>
<li>Open VS Code</li>
<li>Click <code>File</code> up in the left corner -&gt; Click <code>Open Folder</code> -&gt; Find and mark the folder you created -&gt; Click <code>Open</code>.</li>
<li>Open command pallet by pressing <code>ctrl + shift + p</code> -&gt; search for <code>deno init</code>, press <code>enter</code> on <code>Deno: Initialize Workspace Configuration</code> and press <code>enter</code> for the 2 questions.</li>
<li>Click <code>New File</code> in the explorer tab, and name it <code>main.ts</code></li>
<li>Open it by double clicking it.</li>
<li>Write the code above.</li>
<li>Save by hitting <code>ctrl + s</code> on your keyboard.</li>
<li>Open a terminal (if not already open) by hitting <code>ctrl + j</code> or dragging up from the top of the bottombar in VS Code.</li>
<li>Type <code>deno run main.ts</code> and press <code>enter</code>.</li>
</ol>
<h3 id="explaning-the-code"><a class="header" href="#explaning-the-code">Explaning the code</a></h3>
<p><code>console.log(...args)</code> is the same as the <code>print(...args)</code> function in Python. It outputs whatever it gets as arguments to the terminal.</p>
<h2 id="adding-2-numbers"><a class="header" href="#adding-2-numbers">Adding 2 numbers</a></h2>
<p>To get started we want a simple program that takes 2 numbers, and adds them.</p>
<pre><code class="language-ts">function addToNumbers(a: number, b: number): number {
    let result = a + b;
    return result;
}

const inputA = prompt(&quot;a? &quot;)!;
const inputB = parseInt(prompt(&quot;b? &quot;)!);
const output = addToNumbers(parseInt(inputA), inputB);
console.log(output);
</code></pre>
<h3 id="doing-it-in-vs-code-1"><a class="header" href="#doing-it-in-vs-code-1">Doing it in VS Code</a></h3>
<ol>
<li>Delete (or comment out) all previous code, and write the code above.</li>
<li>Save by hitting <code>ctrl + s</code> on your keyboard.</li>
<li>Open a terminal (if not already open) by hitting <code>ctrl + j</code> or dragging up from the top of the bottombar in VS Code.</li>
<li>Type <code>deno run main.ts</code>, and press enter.</li>
</ol>
<h3 id="explaning-the-code-1"><a class="header" href="#explaning-the-code-1">Explaning the code</a></h3>
<p><code>addToNumbers</code> is a 'function', that takes 2 numbers, adds them and returns the result. <code>(a: number, b: number)</code>,
means that when we call the function, we give it 2 numbers, eg. <code>(23, variableContainingNumber)</code>. <code>): number</code>,
means that the function will return a number.</p>
<p><code>prompt</code> is a function that gets input from the user, example:</p>
<pre><code class="language-ts">let usersBirthday = prompt(&quot;what is your birthday? &quot;)!;
console.log(`Your birthday is on ${usersBirthday}!`);
</code></pre>
<p>would run like:</p>
<pre><code>$ deno run main.ts
what is your birthday? well, you see, my birthday is acually on the fourth of July
well, you see, my birthday is acually on the fourth of July
Your birthday is on well, you see, my birthday is acually on the fourth of July!
</code></pre>
<p><code>parseInt</code> is a function that takes a string and converts it to a number. Example:</p>
<pre><code class="language-ts">const stringA: string = &quot;8&quot;;
const stringB = &quot;4&quot;;
const addedStrings = stringA + stringB;
console.log(addedStrings); // will print '84'

const numberA: string = parseInt(stringA);
const numberB = parseInt(stringB);
const addedNumbers = numberA + numberB;
console.log(addedNumbers); // will print '12'
</code></pre>
<p>If you want to use decimal numbers (called floating point numbers, or 'float(s)') eg. <code>3.14</code> and <code>0.23</code>, use <code>parseFloat</code>.</p>
<p>The exclamation point <code>!</code> behind <code>prompt(_)</code> is because <code>prompt</code> returns <code>string | undefined</code>.
The pipe symbol <code>|</code> means 'or', so the <code>prompt</code> function will either return a <code>string</code>-value or an <code>undefined</code>-value.
To type <code>|</code>, press <code>AltGr</code> (key right of spacebar) + the key left of backspace.
In &quot;real&quot; code we would check it like this:</p>
<pre><code class="language-ts">const maybeUsername = prompt(&quot;what is your username? &quot;);
if (maybeUsername) { // (maybeUsername) and (maybeUsername !== undefined) is the same, because (undefined === false)
    let username: string = maybeUsername;
    loginWithUsername(maybeUsername);
} else {
    console.log('nice one, you just fucked it up.');
    throw new Error('fucked');
}
</code></pre>
<p>But because we don't give a shit about error handling right now, we just use the exclamation point <code>!</code>, or 'Non-null assertion operator' as it is called in Typescript. Example:</p>
<pre><code class="language-ts">let maybeValue: number | undefined = maybeGetValueFromSomewhere();
functionThatHasToGetAValue(maybeValue); // Argument of type 'undefined' is not assignable to parameter of type 'number'.(2345)
functionThatHasToGetAValue(maybeValue!); // Ok
</code></pre>
<h2 id="multi-function-calculator"><a class="header" href="#multi-function-calculator">Multi-function calculator</a></h2>
<p>Let's expand our calculator to be a able to do different operations.</p>
<pre><code class="language-ts">function doOperation(a: number, b: number, operation: string): number {
    if (operation === '+') {
        return a + b;
    } else if (operation === '-') {
        return a - b;
    } else if (operation === '*') {
        return a * b;
    } else {
        throw new Error('unknown operation');
    }
}

const a = parseInt(prompt(&quot;a = &quot;)!);
const b = parseInt(prompt(&quot;b = &quot;)!);
const op = prompt(&quot;operation? &quot;)!;
const result = doOperation(a, b, op);
console.log(`${a} ${op} ${b} = ${result}`);
</code></pre>
<p>Try and add division <code>/</code> yourself.</p>
<h3 id="test"><a class="header" href="#test">Test</a></h3>
<pre><code>$ deno run main.ts
a = 4
a = 6
operation? -
4 - 6 = -2
</code></pre>
<h3 id="explaning-the-code-2"><a class="header" href="#explaning-the-code-2">Explaning the code</a></h3>
<p>The backticks <code>` `</code> makes a template string,
exactly like a normal string using double quotes <code>&quot; &quot;</code> or single quotes <code>' '</code>,
but you're able to use the dollarsign curlybrace syntax <code>${...}</code> to insert values.
To type <code>` `</code> press <code>Shift</code> + the key left of backspace.
Example:</p>
<pre><code class="language-ts">let a = 5;
let myString = `word ${a} word word ${3 + 5 * a} word word`;
</code></pre>
<p><code>throw new Error(&quot;error message&quot;)</code> consists of a <code>throw</code> keyword/operator and a thrown value,
in this case a new object of the <code>Error</code>-class, which is used for this purpose.
Throwing a value (most often reffered to as 'throwing an exception/error', or just 'throwing'),
means stopping whatever the program is doing, and going into 'exception-mode'.
This is called 'exceptions'.</p>
<p>Instead of the program crashing,
when we throw an exception, we can also <code>try</code> and <code>catch</code> the exception,
which is something you can read <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/try...catch">here</a>.</p>
<p>In Javascript and Typescript we use single equals <code>=</code> for assignment, eg: <code>let a = 5;</code>,
and we use triple equals 'strict equality operator' <code>===</code> for testing whether 2 values are the same.
The 'strict in-equality operator' <code>!==</code> tests whether 2 values are not the same.
In Typescript we use <code>===</code> instead of <code>==</code>, because of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Strict_equality">annoying history you can read here</a>.</p>
<h2 id="smarter-input"><a class="header" href="#smarter-input">Smarter input</a></h2>
<p>We dont want to type the first, then the second and then the third part of the input, eg
(<code>5</code> -&gt; <code>4</code> -&gt; <code>-</code> =&gt; <code>5 - 4 = 1</code>),
we just want to type and equation and get it solved, eg
<code>5-4</code> -&gt; <code>1</code>.</p>
<pre><code class="language-ts">type Equation = {
    a: number,
    b: number,
    operation: string
};

function doOperation(equation: Equation): number {
    const {a, b, operation} = equation;
    if (operation === '+') {
        return a + b;
    } else if (operation === '-') {
        return a - b;
    } else if (operation === '*') {
        return a * b;
    } else {
        throw new Error('unknown operation');
    }
}

function parseEquation(text: string): Equation {
    const a = parseInt(text[0]);
    const op = text[1];
    const b = parseInt(text[2]);
    const equation: Equation = {
        a,
        b, 
        operation: op,
    };
    return equation;
}

const input = prompt(&quot;&gt; &quot;)!;
const equation = parseEquation(input);
const result = doOperation(equation);
console.log(result);
</code></pre>
<h3 id="explaning-the-code-3"><a class="header" href="#explaning-the-code-3">Explaning the code</a></h3>
<p><code>const {a, b, operator} = equation;</code> is called 'destructuring assignment',
which you can read more of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">here</a>.</p>
<p><code>test[2]</code> is the value at 2's place in the string, counting starting from zero. Example:</p>
<pre><code class="language-ts">const s = &quot;hello world&quot;;
const a = s[0];
console.log(a); // prints &quot;h&quot;
const b = s[2]; 
const c = s[5];
const d = s[9];
console.log(a + b + c); // prints 'lol' 
</code></pre>
<h2 id="more-flexible-parser"><a class="header" href="#more-flexible-parser">More flexible parser</a></h2>
<p>The 'parser' is a bit stupid right now, as it only knows how to parse a very specific 'grammar',
eg: <code>3+2</code> and <code>8-9</code>, but now <code>23-2</code> or <code>2 + 4</code>, lets fix that.</p>
<pre><code class="language-ts">type Equation = /* from before */;
function doOperation(equation: Equation): number { /* from before */}

type Parser = {
    text: string,
    index: number,
};

function parseEquation(text: string): Equation {
    let parser: Parser = {
        text,
        index: 0,
    };
    const a = parseNumber(parser);

    skipWhiteSpace(parser);

    const operator = parser.text[parser.index];
    parser.index++; // same as `index += 1`, same as `index = index + 1`

    skipWhiteSpace(parser);

    const b = parseNumber(parser);
    return {a, b, operator};
}

function skipWhiteSpace(parser: Parser) {
    while (isInputRemaning(parser) &amp;&amp; parser.text[parser.index] === ' ') {
        parser.index++;
    }
}

function parseNumber(p: Parser): number {
    let value = &quot;&quot;;
    value += p.text[p.index];
    p.index++;
    while (isInputRemaning(p) &amp;&amp; isCharANumber(p.text[p.index])) {
        value += p.text[p.index];
        p.index++;
    }
    return parseInt(value);
}

function isCharANumber(char: string): boolean {
    if (&quot;1234567890&quot;.includes(char))
        return true;
    else
        return false;
}

function isInputRemaning(p: Parser): boolean {
    return p.index &lt; p.text.length;
}

const input = prompt(&quot;&gt; &quot;)!;
const equation = parseEquation(input);
const result = doOperation(equation);
console.log(result);
</code></pre>
<h2 id="want-more"><a class="header" href="#want-more">Want more</a></h2>
<p>Ask Simon to do more</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="next" href="in-danish/in-danish.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="next" href="in-danish/in-danish.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
